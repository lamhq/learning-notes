import { FileTree } from 'nextra/components'

# Poetry

## Version

This documentation is for Poetry 1.7.1.

## System requirements

Python 3.8+

## Installation (macOS)

### Install Homebrew

1. run this script in the terminal
    ```shell
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    ```
1. follow instruction in the terminal


### Install `pipx`

```shell
brew install pipx
pipx ensurepath
```

Upgrade `pipx`:

```shell
brew update && brew upgrade pipx
```

### Install Poetry

```shell
pipx install poetry
```

## Configure Poetry

Create virtual environment within your project directory:
```shell
poetry config virtualenvs.in-project true
```

## Set up project

Create a new project:

```shell
poetry new poetry-demo
```

Initialize an existing project:

```shell
cd pre-existing-project
```

```shell
poetry init
```

### Project structure

Your code files must be located in a directory that has the same name of your python package defined in `pyproject.toml`.

For example, if the package name is `app`:
```toml filename="pyproject.toml"
[tool.poetry]
name = "app"
```

Your project structure will look like this:
<FileTree>
  <FileTree.Folder name="app" defaultOpen>
    <FileTree.File name="main.py" />
    <FileTree.File name="utils.py" />
  </FileTree.Folder>
  <FileTree.File name="pyproject.toml" />
</FileTree>

Files in project are imported under `app` package:
```py filename="main.py"
import app.utils

print('Hello')
```

If there's no directory matching the package name in `pyproject.toml`, run `poetry install` will produce an error.


## Activating virtual environment

```shell
poetry shell
```

To deactivate the virtual environment without leaving, use:

```shell
deactivate
```


## Install dependencies

```shell
poetry install
```


## Add a package

```sh
poetry add fastapi
```

Add dev package

```shell
poetry add pylint --dev
```

## Remove a package

```sh
poetry remove fastapi
```


## Show installed packages

```shell
poetry show
```


## Export a `requirements.txt`

```shell
poetry export -f requirements.txt --output requirements.txt
```
